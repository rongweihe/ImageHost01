<!DOCTYPE html>
<!-- saved from url=(0051)https://juejin.cn/editor/drafts/6905343067701411847 -->
<html class="cye-disabled cye-nm"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script async="" src="./写文章 - 掘金_files/analytics.js"></script><script type="text/javascript">Object.defineProperty(window.document, "hidden", { get: function(){ return false; } });Object.defineProperty(window.document, "visibilityState", { get: function(){ return "visible"; } });Object.defineProperty(window.document, "webkitHidden", { get: function(){ return false; } });Object.defineProperty(window.document, "webkitVisibilityState", { get: function(){ return "visible"; } });</script><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><link rel="shortcut icon" href="https://gold-cdn.xitu.io/favicons/favicon.ico"><title>写文章 - 掘金</title><link rel="stylesheet" href="./写文章 - 掘金_files/ionicons.min.css"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0a3707.285e24e8.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0a3ef6.bb6a6b15.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0a510c.ec304768.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0aa799.02757641.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0aaccb.07e3109d.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0ab538.eab265df.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0ac346.ac70700e.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0ae544.850cb46d.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0aeade.ee49e918.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0aecf9.a52da89a.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0aed77.1a796428.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0b166f.0a268973.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0b19f5.15903620.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0b2797.831dc5b9.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0b2ae9.380bf07e.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0b3115.45dd609e.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0b64bf.7b3c5fd2.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0b64d0.93e877ab.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0b9f44.e69bca54.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0ba1c2.720e6deb.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0ba8d9.b0ad131b.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0bce33.c5d2d1c0.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0be2ea.6fc2a9a7.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0c0868.4b2342f6.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0c119a.f1fa6565.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0c210c.1ff0ff8b.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0c2184.c896f14a.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0c55f4.da200992.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0c7ab7.7901ce8b.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0c8495.dade308d.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0c866f.bb460b06.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0ccf7b.788e90c8.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0ccfc7.02ccdb38.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0ce738.afa1be15.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0ce7ef.02586330.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0cfcc0.37a88180.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0cfe92.6e51d29b.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0d2baf.73e13cbf.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0d3646.28dd89c8.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0d3e62.01e31c0f.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0d4404.0afd9582.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0d6ad7.3431c43e.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0d6b34.f8891de1.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0d7133.b50691eb.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0d7514.ddf204d9.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0d7d8c.1d95c7a6.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0da8f6.efc27cd4.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0daae9.5034ac07.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0df075.9a70b222.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0df21d.30f60eca.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0e1b85.cd9bfd1f.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0e22ea.443f79a3.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0e44ea.26269bbe.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0e599d.3bfdc89e.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0e5ba4.dec07fe6.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0e62d4.61e9dd53.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0e648b.91b19427.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0e8df2.8964ef33.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0efcdf.f705214b.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d0f02bd.05b23b70.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d209029.500c05d0.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d209171.7046dbce.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d209b50.53a7f34a.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d20f159.f528405f.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d2101d0.e1a3639a.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d21048c.9eb62164.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d212f1e.1975945e.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d217c9d.bd1a60c4.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d21de27.53d7ec59.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d21f0d5.ffa38786.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d2214ef.656010fd.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d221a5f.fe75b368.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d221f5b.af6173a0.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d224d1d.11543838.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d224ea1.39aae0d2.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d2250e2.a218a345.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d226cf7.2c9f3103.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d2290fe.a167e1f5.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d229493.cd50be07.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d229616.edff9039.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d2299f6.ffbd3406.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d229b2c.262e01a4.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d229c14.f838cc75.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d22a16b.e9bb9306.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d22a179.6d1ba39a.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d22c563.9a6f2b77.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d22c8e5.0bdf2151.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d22cfac.603cce82.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d22d237.a7fde47c.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d22d48f.76834d9f.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d230e22.88ffb265.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d237700.c7ccef71.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-2d238a09.fe765f1f.js" rel="prefetch"><link href="./写文章 - 掘金_files/chunk-7482622c.d64b0cb4.js" rel="prefetch"><link href="https://sf1-scmcdn2-tos.pstatp.com/xitu_juejin_web_editor/js/chunk-748bca26.557b1b9c.js" rel="prefetch"><link href="./写文章 - 掘金_files/app.c6b22fb3.css" rel="preload" as="style"><link href="./写文章 - 掘金_files/chunk-vendors.35f5d419.css" rel="preload" as="style"><link href="./写文章 - 掘金_files/app.32e71f4c.js" rel="preload" as="script"><link href="./写文章 - 掘金_files/chunk-vendors.d3320bcc.js" rel="preload" as="script"><link href="./写文章 - 掘金_files/chunk-vendors.35f5d419.css" rel="stylesheet"><link href="./写文章 - 掘金_files/app.c6b22fb3.css" rel="stylesheet"><style id="nightModeStyle">
html.cye-enabled.cye-nm:not(*:-webkit-full-screen) body,
 html.cye-enabled.cye-nm:not(*:-webkit-full-screen) #cye-workaround-body {-webkit-filter:contrast(91%) brightness(84%) invert(1);}</style><style id="cyebody">html.cye-enabled.cye-lm body{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyediv">html.cye-enabled.cye-lm div{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyetable">html.cye-enabled.cye-lm th{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}html.cye-enabled.cye-lm td{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyetextInput">html.cye-enabled.cye-lm input[type=text]{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}html.cye-enabled.cye-lm textarea{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyeselect">html.cye-enabled.cye-lm select{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyeul">html.cye-enabled.cye-lm ul{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyeChangeByClick">html.cye-enabled.cye-lm .cye-lm-tag,html.cye-enabled.cye-lm.cye-lm-tag{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style type="text/css" abt="234"></style><script>//remove baidu search ad
var _countAA = 0
function doBBBd(){}
doBBBd()
document.addEventListener('keyup', function(){_countAA-=10;doBBBd()}, false)
document.addEventListener('click', function(){_countAA-=10;doBBBd()}, false)

</script><style class="mpa-style-fix ImageGatherer">.FotorFrame{position:fixed!important}</style><style class="mpa-style-fix SideFunctionPanel">.weui-desktop-online-faq__wrp{top:304px!important;bottom:unset!important}.weui-desktop-online-faq__wrp .weui-desktop-online-faq__switch{width:38px!important}</style><script charset="utf-8" src="./写文章 - 掘金_files/chunk-7482622c.d64b0cb4.js"></script></head><body mpa-version="7.16.4" mpa-extension-id="ibefaeehajgcpooopoegkifhgecigeeg" style=""><div id="juejin-web-editor"><div data-v-6156d880="" class="alert-list"></div><div data-v-4712b9df="" class="antiblock-alert"><span data-v-4712b9df=""> 广告屏蔽插件可能会影响编辑器的正常使用与执行性能，请将此页面加入白名单 </span><span data-v-4712b9df="" class="close-btn ion-close"></span></div><div data-v-42cc0d45="" class="edit-draft"><div data-v-3b72bea0="" data-v-42cc0d45="" st:block="markdownEditor" class="markdown-editor"><header data-v-0631f5e2="" data-v-3b72bea0="" st:block="editorHeader" class="header editor-header"><div data-v-0631f5e2="" class="left-box"><div data-v-0631f5e2="" class="logo"></div></div><input data-v-4c4c7500="" data-v-0631f5e2="" placeholder="输入文章标题..." spellcheck="false" maxlength="80" class="title-input title-input"><div data-v-0631f5e2="" class="right-box"><div data-v-df49ce58="" data-v-0631f5e2="" title="最近保存于 2020/12/12 下午8:32:10" class="status-text status-text with-padding">已保存至<a href="https://juejin.cn/editor/drafts">草稿</a></div><div data-v-6b58442b="" data-v-0631f5e2="" st:block="mainImageSelector" class="main-image-selector main-image-selector with-padding unset"><div data-v-6b58442b="" class="toggle-btn"></div><div data-v-6b58442b="" class="panel" style="display: none;"><div data-v-6b58442b="" class="title">添加封面大图</div><button data-v-6b58442b="" st:name="addBtn" class="select-btn"> 点击此处添加图片 </button><div data-v-6b58442b="" class="preview-box" style="display: none;"><img data-v-6b58442b="" src="https://juejin.cn/editor/drafts/6905343067701411847" class="preview-image"><button data-v-6b58442b="" title="移除这张图片" st:name="removeBtn" class="delete-btn"><i data-v-6b58442b="" class="ion-trash-a"></i></button></div></div><input data-v-6b58442b="" type="file" style="display: none;"></div><div data-v-db25eab8="" data-v-0631f5e2="" st:block="editorSwitcher" class="editor-switcher editor-switcher with-padding"><div data-v-db25eab8="" class="toggle-btn"><i data-v-db25eab8="" class="ion-ios-more"></i></div><div data-v-db25eab8="" st:name="switchBtn" st:state="richText" class="panel" style="display: none;"> 切换为富文本编辑器 </div><!----></div><div data-v-44283c70="" data-v-0631f5e2="" st:block="publishPopup" class="publish-popup publish-popup with-padding"><div data-v-44283c70="" class="toggle-btn"><span data-v-44283c70="" class="title">发布</span><i data-v-44283c70="" class="icon ion-arrow-down-b"></i></div><div data-v-44283c70="" class="panel" style="display: none;"><div data-v-44283c70="" class="title">发布文章</div><div data-v-44283c70="" class="category-box"><div data-v-44283c70="" class="sub-title">分类</div><div data-v-44283c70="" class="category-list"><div data-v-44283c70="" class="item"> 后端 </div><div data-v-44283c70="" class="item"> 前端 </div><div data-v-44283c70="" class="item"> Android </div><div data-v-44283c70="" class="item"> iOS </div><div data-v-44283c70="" class="item"> 人工智能 </div><div data-v-44283c70="" class="item"> 开发工具 </div><div data-v-44283c70="" class="item"> 代码人生 </div><div data-v-44283c70="" class="item active"> 阅读 </div></div></div><div data-v-44283c70="" class="tag-box"><div data-v-44283c70="" class="sub-title">添加标签</div><div data-v-44283c70="" class="category-list"><div data-v-44283c70="" class="add-btn-item"> +添加标签 </div></div></div><button data-v-44283c70="" st:name="publishBtn" class="publish-btn"> 确定并发布 </button><!----></div></div><nav data-v-204624f7="" data-v-0631f5e2="" class="navigator main-navigator with-padding"><div data-v-204624f7="" class="toggle-btn" style="background-image: url(&quot;https://user-gold-cdn.xitu.io/2020/3/18/170edcf3b20080e6?imageView2/1/w/64/h/64/q/85/interlace/1&quot;);"></div><div data-v-204624f7="" class="menu root-menu" style="display: none;"><div data-v-204624f7="" class="item-group"><a data-v-204624f7="" href="https://juejin.cn/editor/drafts/new?v=2" class="item">写文章</a><!----><a data-v-204624f7="" href="https://juejin.cn/editor/drafts?v=2" class="item">草稿</a></div><div data-v-204624f7="" class="item-group"><a data-v-204624f7="" href="https://juejin.cn/user/1028798616182887" class="item">我的主页</a><a data-v-204624f7="" href="https://juejin.cn/user/1028798616182887/likes" class="item">我喜欢的</a><!----><a data-v-204624f7="" href="https://juejin.cn/user/1028798616182887/collections" class="item"> 我的收藏集 </a><a data-v-204624f7="" href="https://juejin.cn/subscribe/subscribed" class="item">标签管理</a></div><div data-v-204624f7="" class="item-group"><a data-v-204624f7="" href="https://juejin.cn/user/settings/profile" class="item">设置</a><a data-v-204624f7="" class="item"> 关于 <i data-v-204624f7="" class="icon ion-chevron-right"></i><div data-v-204624f7="" class="menu sub-menu"><div data-v-204624f7="" class="item-group"><a data-v-204624f7="" href="https://juejin.cn/app" target="_blank" class="item">下载应用</a><a data-v-204624f7="" href="https://juejin.cn/about" target="_blank" class="item">关于</a><a data-v-204624f7="" href="https://xitu.io/jobs" target="_blank" class="item"> 加入我们 </a><a data-v-204624f7="" href="https://github.com/xitu/gold-miner" target="_blank" class="item"> 翻译计划 </a><a data-v-204624f7="" href="https://bd.juejin.im/" target="_blank" class="item"> 合作伙伴 </a></div></div></a></div></div><div data-v-e196e394="" data-v-204624f7="" class="article-importer" style="display: none;"><input data-v-e196e394="" type="file" multiple="multiple" class="file-input"><div data-v-e196e394="" class="text"></div></div></nav></div></header><div data-v-3b72bea0="" class="main"><div class="bytemd bytemd-mode-split"><div class="bytemd-toolbar"> <span><svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"></path><path d="M6 8v32M25 8v32M6 24h19M34.226 24L39 19.017V40" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></span><span><svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"></path><path d="M6 8v32M24 8v32M7 24h16M32.667 25.433C32.667 22.267 35 21 37.333 21 39.667 21 42 22.267 42 25.433c0 5.7-10 6.967-10 12.034V40h10" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></span><span><svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"></path><path d="M6 8v32M24 8v32M7 24h16M32 19h10l-7.143 8.4c3.572 0 7.143 3.5 7.143 7S39.143 40 37 40c-2.381 0-4.048-.7-5-2.1" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></span><span><svg width="1em" height="1em" viewBox="-4 -2 52 52" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"></path><path clip-rule="evenodd" d="M25.406 24c5.506 0 9.969-4.477 9.969-10S30.912 4 25.406 4H10v20h15.406zM29.031 44C34.537 44 39 39.523 39 34s-4.463-10-9.969-10H10v20h19.031z" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></span><span><svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"></path><path d="M20 6h16M12 42h16M29 5.952L19 42" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></span><span><svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M18.853 9.116c-7.53 4.836-11.714 10.465-12.55 16.887C5 36 13.94 40.893 18.47 36.497 23 32.1 20.285 26.52 17.005 24.994c-3.28-1.525-5.286-.994-4.936-3.032.35-2.039 5.016-7.69 9.116-10.323a.749.749 0 00.114-1.02L20.285 9.3c-.44-.572-.862-.55-1.432-.185zM38.679 9.116c-7.53 4.836-11.714 10.465-12.55 16.887-1.303 9.997 7.637 14.89 12.167 10.494 4.53-4.397 1.815-9.977-1.466-11.503-3.28-1.525-5.286-.994-4.936-3.032.35-2.039 5.017-7.69 9.117-10.323a.749.749 0 00.113-1.02L40.11 9.3c-.44-.572-.862-.55-1.431-.185z" fill="currentColor"></path></svg></span><span><svg width="1em" height="1em" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" fill-rule="evenodd" d="M0 0h48v48H0z"></path><g stroke-linecap="round" stroke-linejoin="round" stroke-width="4" stroke="currentColor" fill="none"><path d="M26.24 16.373L17.807 7.94c-2.661-2.661-7.035-2.603-9.768.131-2.734 2.734-2.793 7.107-.131 9.769l7.228 7.228M32.903 23.003l7.228 7.228C42.792 32.893 42.734 37.266 40 40s-7.107 2.792-9.769.13L21.8 31.699M26.11 26.142c2.733-2.734 2.791-7.108.13-9.769M21.799 21.799c-2.734 2.733-2.793 7.107-.131 9.768"></path></g></svg></span><span><svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"></path><path d="M16 13L4 25.432 16 37M32 13l12 12.432L32 37" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M26.66 5l-4.77 38" stroke="currentColor" stroke-width="4" stroke-linecap="round"></path></svg></span><span><svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"></path><path d="M16 4c-2 0-5 1-5 5v9c0 3-5 5-5 5s5 2 5 5v11c0 4 3 5 5 5M32 4c2 0 5 1 5 5v9c0 3 5 5 5 5s-5 2-5 5v11c0 4-3 5-5 5" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></span><span><svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"></path><path d="M16 8h28M16 24h28M16 40h28" stroke="currentColor" stroke-width="4" stroke-linecap="round"></path><path d="M6.098 25.838l.56-.398c1.76-1.233 2.49-2.05 2.49-3.573 0-1.877-1.328-3.014-3.015-3.014-1.686 0-3.014 1.137-3.014 3.014a1.147 1.147 0 002.288.125l.007-.125c0-.524.228-.72.72-.72.49 0 .719.196.719.72 0 .46-.31.834-1.315 1.554l-.427.301c-1.591 1.116-2.258 1.858-2.258 3.211V28c0 .634.513 1.148 1.147 1.148h4a1.147 1.147 0 000-2.295H5.154c.043-.252.293-.534.944-1.015zM4.228 37.874c-.582.734-.106 1.8.795 1.888l.12.006c.77 0 1.69.965 1.69 1.832 0 .718-.491 1.232-.833 1.232-.524 0-.808-.104-.966-.292l-.048-.066a1.168 1.168 0 00-1.972 1.252c.617.971 1.663 1.442 2.986 1.442 1.658 0 3.168-1.585 3.168-3.568 0-1.43-.873-2.818-2.077-3.576l1.824-2.298c.607-.765.062-1.894-.915-1.894H4a1.168 1.168 0 000 2.336h1.582l-1.354 1.706zM4.831 13a1.169 1.169 0 002.338 0V4c0-1.06-1.298-1.573-2.023-.799l-2 2.138a1.169 1.169 0 001.586 1.71l.1-.09V13z" fill="currentColor"></path></svg></span><span><svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M20 24h24-24z" fill="#FFF"></path><path d="M20 24h24" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M20 38h24-24z" fill="#FFF"></path><path d="M20 38h24" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M20 10h24-24z" fill="#FFF"></path><path d="M20 10h24" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path fill="#FFF" stroke="currentColor" stroke-width="4" stroke-linejoin="round" d="M4 34h8v8H4zM4 20h8v8H4zM4 6h8v8H4z"></path></svg></span><span><svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"></path><path d="M42 18v21a3 3 0 01-3 3H9a3 3 0 01-3-3V9a3 3 0 013-3h23" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M14 20l10 8L42 6" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></span><span><svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"></path><path d="M41 4H7a3 3 0 00-3 3v34a3 3 0 003 3h34a3 3 0 003-3V7a3 3 0 00-3-3z" stroke="currentColor" stroke-width="4"></path><path d="M17 4v40M31 4v40M4 17.038L44 17M4 30.519l40-.038" stroke="currentColor" stroke-width="4" stroke-linecap="round"></path></svg></span><span><svg width="1em" height="1em" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" fill-rule="evenodd" d="M0 0h48v48H0z"></path><g transform="translate(5 8)" stroke-width="4" stroke-linejoin="round" stroke="currentColor"><path d="M2 0h34a2 2 0 012 2v28a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2z" stroke-linecap="round" fill="none"></path><circle stroke-linecap="round" cx="9.5" cy="8.5" r="1.5" fill="none"></circle><path d="M10 16l5 4 6-7 17 13v4a2 2 0 01-2 2H2a2 2 0 01-2-2v-4l10-10z" fill="#FFF"></path></g></svg></span> <span style="float:right"><svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"></path><path d="M24 44a19.937 19.937 0 0014.142-5.858A19.937 19.937 0 0044 24a19.938 19.938 0 00-5.858-14.142A19.937 19.937 0 0024 4 19.938 19.938 0 009.858 9.858 19.938 19.938 0 004 24a19.937 19.937 0 005.858 14.142A19.938 19.938 0 0024 44z" fill="#FFF" stroke="currentColor" stroke-width="4" stroke-linejoin="round"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M24 11a2.5 2.5 0 110 5 2.5 2.5 0 010-5z" fill="currentColor"></path><path d="M24.5 34V20h-2M21 34h7" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></span></div> <div class="bytemd-body"><div class="bytemd-editor"><textarea style="display: none;"></textarea><div class="CodeMirror cm-s-default CodeMirror-wrap CodeMirror-focused"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 246px; left: 480.016px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;" tabindex="0"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="bottom: 0px; display: block;"><div style="min-width: 1px; height: 4342px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: -7px; border-right-width: 43px; min-height: 4286px; padding-right: 7px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style="visibility: hidden;"><div class="CodeMirror-cursor" style="left: 452.016px; top: 345px; height: 23px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style="text-rendering: auto;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 主题列表：juejin, github, smartblue, cyanosis, channing-cyan, fancy, hydrogen, condensed-night-purple, greenwillow, v-green, vue-pro, healer-readable, mk-cute</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 贡献主题：https://github.com/xitu/juejin-markdown-themes</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">theme</span><span class="cm-meta">: </span>juejin</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">highlight</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-quote cm-quote-1">&gt; 点赞再看，养成习惯</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-quote cm-quote-1">&gt; 文章每周持续更新，可以微信搜索「herongwei」第一时间阅读和催更，本文 GitHub </span><span class="cm-quote cm-quote-1 cm-link">https://github.com/rongweihe/MoreThanCode</span><span class="cm-quote cm-quote-1"> 已经收录，有一线大厂面试点思维导图，也整理了很多我的文档，欢迎 star 和完善。一起加油，变得更好！</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">大家好，我是小贺。</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">今天继续陪大家读 STL 源码。这次我们来看看 set 相关的几个算法。</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-header cm-header-1"># C++ STL set 相关算法</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">STL一共提供了四种与 set 集合相关的算法，分别是并集，交集，差集，对称差集。</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">但要注意的是：此处的 set 不同于数学中的集合。数学中的集合允许元素以任意次数、任意次序出现，但此处的不允许元素重复出现，而且所有元素按序出现。这四种算法处理的结构也是有序的。</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">有关 set 的四个算法提供两个版本。版本一接收五个迭代器，前四个分别两两确定一个集合区间，还有一个迭代器用于处理运算的结果。版本二和版本一的不同之处在于，版本二可以自定义元素的比较方式（模板参数定制比较器）。它们的返回值相同，都返回运算结果的尾端迭代器。</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">这四个算法虽然以 set 命名，但实际上也不局限于 set, 只要是元素有序出现，且提供迭代器的容器都可以用此算法，这一点才稍后的源码中可以看到。</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-header cm-header-2">## 1、set_union</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">算法 set_union 提供两个集合 S1，S2 之并集，即 S1 U S2 。 set_union 是一种稳定的操作，输入区间内的每个元素的相对顺序不会改变。其中 STL 提供两个版本，差异在于如何定义某个元素小于另一个元素：</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">- 第一个版本使用 operator&lt; 进行比较。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">- 第二个版本采用仿函数 comp 进行比较。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">源码：</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">```c++</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">template&lt;class InputIterator1, class InputIterator2, class OutputIterator&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">OutputIterator set_union(InputIterator1 first1, InputIterator1 last1,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">InputIterator2 first2, InputIterator2 last2,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">OutputIterator result) {</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">//当两个区间都尚未到达尾端时，执行以下操作</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">while(first1 != last1 &amp;&amp; first2 != last2) {</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//在两个区间内分别移动迭代器 首先将元素较小者(a)记录于目标区</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//然后移动 a 区迭代器前进；同时保持另一个迭代器不动；进行下一次比较</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//记录小值，迭代器移动...直到两区中有一区达到尾端</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//如果元素相等 可以任取一个迭代器所指元素 然后同时移动两个迭代器</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">if (*first1 &lt; *first2) {</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">*result = *first1;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 43px; width: 1px; border-bottom: 0px solid transparent; top: 4286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 4329px;"></div></div></div></div> <div class="bytemd-preview"><div class="markdown-body"><!---165927565--><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><blockquote>
<p>点赞再看，养成习惯</p>
</blockquote>
<blockquote>
<p>文章每周持续更新，可以微信搜索「herongwei」第一时间阅读和催更，本文 GitHub <a href="https://github.com/rongweihe/MoreThanCode" target="_blank" rel="nofollow noopener noreferrer">https://github.com/rongweihe/MoreThanCode</a> 已经收录，有一线大厂面试点思维导图，也整理了很多我的文档，欢迎 star 和完善。一起加油，变得更好！</p>
</blockquote>
<p>大家好，我是小贺。
今天继续陪大家读 STL 源码。这次我们来看看 set 相关的几个算法。</p>
<h1>C++ STL set 相关算法</h1>
<p>STL一共提供了四种与 set 集合相关的算法，分别是并集，交集，差集，对称差集。</p>
<p>但要注意的是：此处的 set 不同于数学中的集合。数学中的集合允许元素以任意次数、任意次序出现，但此处的不允许元素重复出现，而且所有元素按序出现。这四种算法处理的结构也是有序的。</p>
<p>有关 set 的四个算法提供两个版本。版本一接收五个迭代器，前四个分别两两确定一个集合区间，还有一个迭代器用于处理运算的结果。版本二和版本一的不同之处在于，版本二可以自定义元素的比较方式（模板参数定制比较器）。它们的返回值相同，都返回运算结果的尾端迭代器。</p>
<p>这四个算法虽然以 set 命名，但实际上也不局限于 set, 只要是元素有序出现，且提供迭代器的容器都可以用此算法，这一点才稍后的源码中可以看到。</p>
<h2>1、set_union</h2>
<p>算法 set_union 提供两个集合 S1，S2 之并集，即 S1 U S2 。 set_union 是一种稳定的操作，输入区间内的每个元素的相对顺序不会改变。其中 STL 提供两个版本，差异在于如何定义某个元素小于另一个元素：</p>
<ul>
<li>第一个版本使用 operator&lt; 进行比较。</li>
<li>第二个版本采用仿函数 comp 进行比较。</li>
</ul>
<p>源码：</p>
<pre><code class="hljs language-c++">
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;class InputIterator1, class InputIterator2, class OutputIterator&gt;
OutputIterator <span class="hljs-title">set_union</span><span class="hljs-params">(InputIterator1 first1, InputIterator1 last1,
                        InputIterator2 first2, InputIterator2 last2,
                        OutputIterator result)</span> </span>{
    <span class="hljs-comment">//当两个区间都尚未到达尾端时，执行以下操作</span>
    <span class="hljs-keyword">while</span>(first1 != last1 &amp;&amp; first2 != last2) {
        <span class="hljs-comment">//在两个区间内分别移动迭代器 首先将元素较小者(a)记录于目标区</span>
        <span class="hljs-comment">//然后移动 a 区迭代器前进；同时保持另一个迭代器不动；进行下一次比较</span>
        <span class="hljs-comment">//记录小值，迭代器移动...直到两区中有一区达到尾端</span>
        <span class="hljs-comment">//如果元素相等 可以任取一个迭代器所指元素 然后同时移动两个迭代器</span>
        <span class="hljs-keyword">if</span> (*first1 &lt; *first2) {
            *result = *first1;
            ++first1;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (*first2 &lt; *first2) {
            *result = *first2;
            ++first2;
        } <span class="hljs-keyword">else</span> {
            *result = *first1;
            ++first1;
            ++first2;
        }
        ++result;
    }
    <span class="hljs-comment">//只要两个区间有一个到达尾端就结束while循环</span>
    <span class="hljs-comment">//将其中一个没有到达尾端的区间的剩余元素全部拷贝到目的区间。</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::copy(first2, last2, <span class="hljs-built_in">std</span>::copy(first1, last1, result));
}
</code></pre>
<h2>2、set_intersection</h2>
<p>算法  <code>set_intersection</code>  提供两个集合 <code>S1</code>，<code>S2</code> 之交集，即 <code>S1  S2</code> 。</p>
<p><code>set_intersection</code>  是一种稳定的操作，输入区间内的每个元素的相对顺序不会改变。</p>
<p>STL 提供两个版本，差异在于如何定义某个元素小于另一个元素：</p>
<ul>
<li>第一个版本使用 operator&lt; 进行比较。</li>
<li>第二个版本采用仿函数 comp 进行比较。</li>
</ul>
<pre><code class="hljs language-c++"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;class InputIterator1, class InputIterator2, class OutputIterator&gt;
OutputIterator <span class="hljs-title">set_intersection</span><span class="hljs-params">(InputIterator1 first1, InputIterator1 last1,
                        InputIterator2 first2, InputIterator2 last2,
                        OutputIterator result)</span> </span>{
    <span class="hljs-comment">//当两个区间都尚未到达尾端时，执行以下操作</span>
    <span class="hljs-keyword">while</span>(first1 != last1 &amp;&amp; first2 != last2) {
        <span class="hljs-comment">//在两个区间内分别移动迭代器 取交集也很好理解 当遇到相等的元素才记录</span>
        <span class="hljs-keyword">if</span> (*first1 &lt; *first2) {
            ++first1;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (*first2 &lt; *first2) {
            ++first2;
        } <span class="hljs-keyword">else</span> {
            *result = *first1;
            ++first1;
            ++first2;
            ++result;
        }
    }
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<h2>3、set_difference</h2>
<p>算法  <code>set_difference</code>   提供两个集合 <code>S1</code>，<code>S2</code> 之差集，即 <code>S1 - S2</code> 。</p>
<p><code>set_difference</code> 是一种稳定的操作，输入区间内的每个元素的相对顺序不会改变。</p>
<p>STL 提供两个版本，差异在于如何定义某个元素小于另一个元素：</p>
<ul>
<li>第一个版本使用 operator&lt; 进行比较。</li>
<li>第二个版本采用仿函数 comp 进行比较。</li>
</ul>
<pre><code class="hljs language-c++"><span class="hljs-comment">//差集：计算 存在于[first1, last1) 且不存在于 [first2,last2)所有元素</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;class InputIterator1, class InputIterator2, class OutputIterator&gt;
OutputIterator <span class="hljs-title">set_difference</span><span class="hljs-params">(InputIterator1 first1, InputIterator1 last1,
                        InputIterator2 first2, InputIterator2 last2,
                        OutputIterator result)</span> </span>{
    <span class="hljs-comment">//当两个区间都尚未到达尾端时，执行以下操作</span>
    <span class="hljs-keyword">while</span>(first1 != last1 &amp;&amp; first2 != last2) {
        <span class="hljs-comment">//在两个区间内分别移动迭代器 当第一区间的元素等于第二区间 就让两区间同时前进</span>
        <span class="hljs-comment">//当第一区间元素大于第二区间的元素 就让第二区间往前走</span>
        <span class="hljs-comment">//有了上面两步就能保证当第一区间的元素小于第二区间时 第一区间的元素只存在于第一区间而不存在第二区间</span>
        <span class="hljs-comment">//于是将它记录于目标区间</span>
        <span class="hljs-keyword">if</span> (*first1 &lt; *first2) {
            *result = *first1;
            ++first1;
            ++result;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (*first2 &lt; *first2) {
            ++first2;
        } <span class="hljs-keyword">else</span> {
            ++first1;
            ++first2;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::copy(first1, last1, result);
}
</code></pre>
<h2>4、set_symmetric_difference</h2>
<p>算法  <code>set_symmetric_difference</code>   提供两个集合 <code>S1</code>，<code>S2</code> 之对称差集，即 <code>(S1 - S2) U (S2 - S1)</code> 。</p>
<p><code>set_symmetric_difference</code> 是一种稳定的操作，输入区间内的每个元素的相对顺序不会改变。</p>
<p>由于 <code>S1</code>，<code>S2</code> 内的每个元素都不需要唯一，因此如果某个值在 <code>S1</code>  出现 <code>n</code> 次，在 <code>S2</code>  中出现 <code>m</code>  次，那么改值在输出区间出现 <code>|n-m|</code>  次。</p>
<p>STL 提供两个版本，差异在于如何定义某个元素小于另一个元素：</p>
<ul>
<li>第一个版本使用 operator&lt; 进行比较。</li>
<li>第二个版本采用仿函数 comp 进行比较。</li>
</ul>
<pre><code class="hljs language-c++"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;class InputIterator1, class InputIterator2, class OutputIterator&gt;
OutputIterator <span class="hljs-title">set_symmetric_difference</span><span class="hljs-params">(InputIterator1 first1, InputIterator1 last1,
                        InputIterator2 first2, InputIterator2 last2,
                        OutputIterator result)</span> </span>{
    <span class="hljs-comment">//当两个区间都尚未到达尾端时，执行以下操作</span>
    <span class="hljs-keyword">while</span>(first1 != last1 &amp;&amp; first2 != last2) {
        <span class="hljs-comment">//在两个区间内分别移动迭代器 当两个区间元素相等 就让两区间同时前进</span>
        <span class="hljs-comment">//当两个区间元素不等，记录较小值于目标区间 并让较小值区间继续前进</span>
        <span class="hljs-keyword">if</span> (*first1 &lt; *first2) {
            *result = *first1;
            ++first1;
            ++result;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (*first2 &lt; *first2) {
            *result = *first2;
            ++first2;
            ++result;
        } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// *first1 == *first2</span>
            ++first1;
            ++first2;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::copy(first2, last2, <span class="hljs-built_in">std</span>::copy(first1, last1, result));
}
</code></pre><style>.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style></div></div></div></div></div><div data-v-3b72bea0="" class="footer"><div data-v-a28e2374="" data-v-3b72bea0="" class="editor-footer editor-footer"><button data-v-a28e2374="" class="ctrl-btn shotcut-btn"><img data-v-a28e2374="" src="./写文章 - 掘金_files/md.555fde04.svg" class="icon"><div data-v-6f1bdaae="" data-v-a28e2374="" class="shotcut-panel shotcut-panel"><span data-v-6f1bdaae="" class="panel-title">快捷键</span><a data-v-6f1bdaae="" href="https://juejin.cn/book/5c90640c5188252d7941f5bb/section/5c9066395188252d71681c5d" target="_blank" class="more-link"> 更多语法 </a><table data-v-6f1bdaae="" class="shotcut-table"><thead data-v-6f1bdaae=""><tr data-v-6f1bdaae=""><th data-v-6f1bdaae="">Markdown</th><th data-v-6f1bdaae="">结果</th><th data-v-6f1bdaae="">快捷键</th></tr></thead><tbody data-v-6f1bdaae=""><tr data-v-6f1bdaae=""><td data-v-6f1bdaae=""># 标题</td><td data-v-6f1bdaae="">H1</td><td data-v-6f1bdaae=""></td></tr><tr data-v-6f1bdaae=""><td data-v-6f1bdaae="">## 标题</td><td data-v-6f1bdaae="">H2</td><td data-v-6f1bdaae="">Ctrl / ⌘ + H</td></tr><tr data-v-6f1bdaae=""><td data-v-6f1bdaae="">**文本**</td><td data-v-6f1bdaae=""><b data-v-6f1bdaae="">粗体</b></td><td data-v-6f1bdaae="">Ctrl / ⌘ + B</td></tr><tr data-v-6f1bdaae=""><td data-v-6f1bdaae="">[描述](http://)</td><td data-v-6f1bdaae=""><a data-v-6f1bdaae="">链接</a></td><td data-v-6f1bdaae="">Ctrl / ⌘ + K</td></tr><tr data-v-6f1bdaae=""><td data-v-6f1bdaae="">`code`</td><td data-v-6f1bdaae=""><code data-v-6f1bdaae="">Inline Code</code></td><td data-v-6f1bdaae="">Ctrl / ⌘ + Shift + K</td></tr><tr data-v-6f1bdaae=""><td data-v-6f1bdaae="">```code```</td><td data-v-6f1bdaae=""><pre data-v-6f1bdaae="">Code</pre></td><td data-v-6f1bdaae="">Ctrl / ⌘ + Shift + C</td></tr><tr data-v-6f1bdaae=""><td data-v-6f1bdaae="">![alt](http://)</td><td data-v-6f1bdaae="">图片</td><td data-v-6f1bdaae="">Ctrl / ⌘ + Shift + I</td></tr><tr data-v-6f1bdaae=""><td data-v-6f1bdaae="">* item</td><td data-v-6f1bdaae="">列表</td><td data-v-6f1bdaae="">Ctrl / ⌘ + Shift + L</td></tr></tbody></table></div></button><button data-v-a28e2374="" title="点击上传图片" class="ctrl-btn upload-image-btn"><img data-v-a28e2374="" src="./写文章 - 掘金_files/img.8288be10.svg" class="icon"></button><a data-v-a28e2374="" href="https://juejin.cn/book/5c90640c5188252d7941f5bb/section/5cb04a4e5188251ae4157867" target="_blank" class="guide-link"> 了解社区规范 </a><button data-v-a28e2374="" title="点击隐藏预览区" class="ctrl-btn toggle-layout-btn"><img data-v-a28e2374="" src="./写文章 - 掘金_files/collapse.dbb05aef.svg" class="icon" style="display: none;"><img data-v-a28e2374="" src="./写文章 - 掘金_files/extend.ec7370cb.svg" class="icon"></button></div><input data-v-3b72bea0="" type="file" style="display: none;"><div data-v-12760342="" data-v-3b72bea0="" class="preview-footer"><div data-v-12760342="" class="title">预览</div><div data-v-12760342="" class="word-count">1562 字</div></div></div><!----></div></div></div><script src="./写文章 - 掘金_files/chunk-vendors.d3320bcc.js"></script><script src="./写文章 - 掘金_files/app.32e71f4c.js"></script><div class="mpa-sc mpa-plugin-article-gatherer mpa-new mpa-rootsc" data-z="100" style="display: block;" id="mpa-rootsc-article-gatherer"></div><div class="mpa-sc mpa-plugin-image-gatherer mpa-new mpa-rootsc" data-z="100" style="display: block;" id="mpa-rootsc-image-gatherer"></div><div class="mpa-sc mpa-plugin-page-clipper mpa-new mpa-rootsc" data-z="100" style="display: block;" id="mpa-rootsc-page-clipper"></div><div class="mpa-sc mpa-plugin-text-gatherer mpa-new mpa-rootsc" data-z="100" style="display: block;" id="mpa-rootsc-text-gatherer"></div><div class="mpa-sc mpa-plugin-video-gatherer mpa-new mpa-rootsc" data-z="100" style="display: block;" id="mpa-rootsc-video-gatherer"></div><div class="mpa-sc mpa-plugin-side-function-panel mpa-new mpa-rootsc" data-z="110" style="display: block;" id="mpa-rootsc-side-function-panel"></div><div class="mpa-sc mpa-plugin-notifier mpa-new mpa-rootsc" data-z="120" style="display: block;" id="mpa-rootsc-notifier"></div><div class="mpa-sc mpa-plugin-notification-manager mpa-new mpa-rootsc" data-z="130" style="display: block;" id="mpa-rootsc-notification-manager"></div></body><div id="cyeBlackMaskLayer" style="background-color: rgb(19, 19, 19); position: fixed; width: 1980px; height: 1080px; z-index: -2147483648;"></div><div id="cye-workaround-body" style="position: absolute; left: 0px; top: 0px; z-index: -2147483646; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(248, 249, 250); height: 887px; width: 1920px;"></div><div id="cye-workaround-body-image" style="position: absolute; left: 0px; top: 0px; z-index: -2147483645; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0); height: 887px; width: 1920px;"></div></html>